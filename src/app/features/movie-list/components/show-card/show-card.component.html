<article class="show-card">
  <a [routerLink]="['/movies', show().id]" class="card-poster-link">
    <img
      class="card-poster"
      [src]="show().image?.medium ?? 'https://via.placeholder.com/210x295?text=No+Image'"
      [alt]="show().name"
      loading="lazy"
    />
  </a>

  <div class="card-body">
    <h3 class="card-title">
      <a [routerLink]="['/movies', show().id]">{{ show().name }}</a>
    </h3>

    <div class="card-genres">
      @for (genre of show().genres.slice(0, 2); track genre) {
        <p-tag [value]="genre" severity="secondary" />
      }
    </div>

    <div class="card-meta">
      @if (show().rating.average) {
        <span class="rating">‚≠ê {{ show().rating.average }}</span>
      }
      <span class="status" [class.ended]="show().status === 'Ended'">
        {{ show().status }}
      </span>
    </div>
  </div>

  <div class="card-actions">
    <p-button
      [icon]="show().isFavorite ? 'pi pi-heart-fill' : 'pi pi-heart'"
      [severity]="show().isFavorite ? 'danger' : 'secondary'"
      [rounded]="true"
      [text]="true"
      [ariaLabel]="show().isFavorite ? 'Remove from favorites' : 'Add to favorites'"
      (onClick)="favoriteToggled.emit(show().id)"
    />
    <p-button
      icon="pi pi-pencil"
      severity="secondary"
      [rounded]="true"
      [text]="true"
      ariaLabel="Edit show"
      (onClick)="editRequested.emit(show())"
    />
    <p-button
      icon="pi pi-trash"
      severity="danger"
      [rounded]="true"
      [text]="true"
      ariaLabel="Delete show"
      (onClick)="deleteRequested.emit(show().id)"
    />
  </div>
</article>
